<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width; target-densityDpi=160; initial-scale=1; maximum-scale=1" />
  <meta name="description" content="Personal blog of John Novak" />

  <meta name="author" content="John Novak">
  <meta name="Generator" content="Jekyll (http://jekyllrb.com/)">

  <title>Huffman Encoding in Python &mdash; Optimisation Series Part IV</title>

  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" />
  <link rel="stylesheet" type="text/css" href="/css/blog.css" />

  <link rel="alternate" type="application/rss+xml" title="John Novak Blog" href="//feed.xml">
</head>

<body>
  <script src="/js/lib/respond.min.js"></script>

  <div id="wrapper">

  <div id="header">
    <div id="header-bg"></div>
    <a href="/"><img id="jn-logo" src="/img/jn-logo.png" alt="John Novak" /></a>
    <ul>
      <li><a href="/about/">About</a></li>
      <li><a href="/archives/">Archives</a></li>
      <li><a href="/tags/">Tags</a></li>
      <li><a href="/feed.xml">Rss</a></li>
    </ul>
  </div>


<div class="post">

<h1><a href="/2013/10/02/jekyll-tutorial/">Huffman Encoding in Python &mdash; Optimisation Series Part IV</a></h1>
<p class="date">2013 Oct 02</p>

<ul class="tags">

  <li><a href="#">java</a></li>

  <li><a href="#">optimisation</a></li>

  <li><a href="#">compression</a></li>

  <li><a href="#">huffmann</a></li>

</ul>

<p>In a previous post I wrote about moving from Wordpress to Jekyll where I was
ultimately hosting this site in GitHub Pages. While that setup was great, and
an easy way to get started, I wanted to have a little more freedom to play
with plugins and additional/custom functionality. To that end I migrated the
system into Octopress and reverted to hosting with the same server from which
I was running the previous Wordpress install. I had waited to cancel the
hosting service just in case I decided to do this.</p>

<p>Here I&#8217;m going to show you how to make an interactive Archives page with
categories in Jekyll without using plugins. Very simple and extensible through
JavaScript.</p>

<h2 id="what-i-want-to-achieve">What I want to achieve&#8230;</h2>

<p>My blog needed an overview page which contains every Blog post, ideally sorted
by date. That is fairly easy in pure Jekyll: Just loop over every post and add
title and date.</p>

<p>Now here&#8217;s the catch: I&#8217;m using <a href="#">tags</a> to sort my posts into different
categories and it would be nice if a user could select a specific tag and get
a listing of all blogs with this tag. Fairly basic stuff &#8211; for a dynamic
blogging engine. Now, [Jekyll]<sup id="fnref:jekyll"><a href="#fn:jekyll" class="footnote">1</a></sup> supports tags out of the box, but has,
at this time, no function to generate a page for each tag. So, everytime we
introduce a new tag, we&#8217;d need to <a href="#">create a archives page</a> for this tag to
loop over the posts. Which, in my opinion, makes Jekyll&#8217;s tags feature pretty
useless.</p>

<p>Plugins would of course solve this problem. But remember my self-imposed
constraint mentioned in Part 1? Pure vanilla <a href="#">Jekyll</a> running on
<a href="http://www.github.com/">GitHub Pages</a>. So, let&#8217;s try to find another way.</p>

<h2 id="and-how-to-get-there">&#8230;and how to get there</h2>

<p>So, if Jekyll can&#8217;t generate tag pages out of the box, we&#8217;ll elevate the
problem to the client browser. If our [Archives]<sup id="fnref:archive"><a href="#fn:archive" class="footnote">2</a></sup> page already
contains every post of the blog, we&#8217;ll just have to hide the ones which do not
match our tags. How?  With the HTML 5 multi-tool: <em>JavaScript!</em></p>

<p>We are going to pass the selected category via Hashtag in the URL, for example
<code>/archives/#!webdev</code>. [JavaScript][js] then extracts the tag and toggles the
posts based on whether they match it or not.</p>

<p>Before we dive in, I want to note that you can see the results on my
<a href="#">Archives</a> page.</p>

<h3 id="step-1-the-html">Step 1: The HTML</h3>

<p>To make things easier, every post will store its tags in a data- attribute:</p>

<div>
    <pre><code class="c">/* Finds and returns the small sub-tree in the forest */

int findSmaller (Node *array[], int differentFrom){
    int smaller;
    int i = 0;

    while (array[i]-&gt;value == -1) i++;
    smaller = i;

    if (i == differentFrom) {
        i++;
        while (array[i] -&gt; value == -1)
            i++;
        smaller = i;
    }

    for (i = 1; i &lt; 27; i++) {
        if (array[i]-&gt;value == -1)
            continue;
        if (i == differentFrom)
            continue;
        if (array[i]-&gt;value&lt;array[smaller]-&gt;value)
            smaller = i;
    }
    return smaller;
}</code></pre>
  </div>

<h3 id="step-2-javascript-voodoo">Step 2: JavaScript Voodoo</h3>

<p>Jep, I&#8217;m using jQuery here. But &#8212; you should have no problem adapting it to
standard JavaScript. The updateTags function extracts the tag from the hash,
loops over <code>.post</code> elements, compares their data-tags-attribute against the
hash and fades them depending on the result. We also listen for <code>onhashchange</code>
to update the &#171;selection&#187; when a tag link on the same page is clicked.</p>

<div>
    <pre><code class="javascript">$(function() {
function updateTags() {
    var hash = window.location.hash.substr(2);

    $('.post').each(function(i, post) {
        if ($(post).data('tags').indexOf(hash) == -1) {
            $(post).animate({
                opacity: 0.5,
                'font-size': '0.8em',
            }, 'fast');
        } else {
            $(post).animate({
                opacity: 1,
                'font-size': '1em',
            }, 'fast');
        }
    });
}

$(window).bind('hashchange', updateTags)
  updateTags();
})</code></pre>
  </div>

<p class="caption">Listing 1 &mdash; updateTags() function in JavaScript</p>

<h3 id="bonus-----group-posts-by-year">Bonus &#8212; Group Posts by Year</h3>

<p>Imagine you want to divide your post listing into different years to achieve
something like this. It&#8217;s fairly easy with standard Liquid if you know how. We store the year of the
previous post, extract the year of the current one, compare both and output a
header if the two differ.</p>

<h2 id="references">References</h2>

<div class="footnotes">
  <ol>
    <li id="fn:jekyll">
      <p>http://jekyllrb.org/    &#8220;Jekyll static blog page generator&#8221; <a href="#fnref:jekyll" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:archive">
      <p>http://www.archive.org/ &#8220;The Internet Archive&#8221; <a href="#fnref:archive" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>


<hr />

<noscript><p id="no-disqus"><i>Please enable JavaScript to view the comments.</i></p></noscript>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'johnnovak';
    var disqus_identifier = '/2013/10/02/jekyll-tutorial/';
    var disqus_title = 'Huffman Encoding in Python &mdash; Optimisation Series Part IV';
    var disqus_url = 'http://johnnovak.net///2013/10/02/jekyll-tutorial/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

</div>



  </div>

  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script>
    if (!window.jQuery) {
      document.write('<script src="/js/lib/jquery-1.11.1.min.js"><\/script>');
    }
  </script>
  <script src="/blog/js/anchor.js"></script>
</body>
</html>

